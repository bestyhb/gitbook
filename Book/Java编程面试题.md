## 爬虫

* **如何最快速地从HTTP-URL中获取输入流并能够解析HTML源码？（代码题）**  
从输入流中逐行读取`new BufferReader(new InpuptStreamReader(new URL(new String(urlPath)).openConnection().getInputStream())).readLine()`。

* **如何解决爬虫403问题？（经验题）**  
爬虫403的异常通常为"java.io.IOException:Server returned HTTP response code: 403 for URL"。通常情况下这种问题分为以下两种：  
如果是服务端需要访问权限，那么需要提供授权信息。例如在URL中添加用户名或密码，或者使用OAuth2等认证方式。  
如果是服务端禁止抓去，因为有些网站会根据请求的User-Agent头部判断请求是否来自合法浏览器，那么可以通过设置User-Agent。  

* **java.net.URLConnection和java.net.HttpURLConnection有什么异同（）？**  
从继承关系上来说：  
`URLConnection`是一个抽象类，它是所有URL连接类型的基类，用于处理各种类型的URL连接而不局限于HTTP。  
`HttpURLConnection`是`URLConnection`的子类，它专门用于处理HTTP协议的URL，提供与HTTP协议相关的特定方法和功能。  
从使用范围上来说：  
`URLConnection`可以用于多种协议的连接，例如HTTP, FTP, FILE。  
`HTTPURLConnection`只能用于HTTP协议等连接，提供了更多欲HTTP相关的方法和属性。  
从功能特性上来说：  
`URLConnection`提供了基本的连接功能，可以获取输入流、输出流及一些基本的头信息。  
`HTTPURLConnection`在`URLConnection`的基础功能上还提供了更多的HTTP相关功能，例如设置请求方法、处理响应状态码、设置请求头、设置连接超时等。  
从默认行为上来说：  
`URLConnection`默认的连接实现是根据URL协议的不同而调用不同的子类。  
`HTTPURLConnection`默认情况下会自动执行**HTTP重定向**。  
总体来说，如果单独处理HTTP连接，或者执行HTTP连接的相关操作，如设置请求头、处理响应状态等，使用`HTTPURLConnection`更合适，如果需要处理多种协议等连接，或者更加通用的连接操作，最好使用`URLConnection`。  

* **什么是HTTP重定向？如何在爬虫中取消重定向？**  
HTTP Redirect（HTTP重定向）是一种在客户端发起请求时，服务器返回特定响应状态码和新的URL，用于将客户端Redirect到另一个URL的机制。通常用于网站的流量转发、访问控制、错误处理以及网站内容的移动。  
HTTP重定向可以用于多种情况，例如：  
1. 当网站更改了页面的URL结构时，旧的URL可能会重定向到新的URL，以确保用户可以找到所需的内容；  
2. 当某个资源被删除或被移动到其他位置时，可以通过重定向告知客户端新的位置；  
3. 当需要对用户进行身份验证或权限检查时，可以将用户重定向到登录页面。  
当客户端发起HTTP请求时，服务器可能会返回以下一些常见的HTTP重定向状态码：  
**301 (Moved Permanently)**: 表示所请求资源已永久移动至新的URL。客户端应当更新其链接并将所有未来请求发送到新的URL。  
**302 (Found)/303(See Other)**: 表示所请求的资源临时移动到新的URL，而303则是一种更严格的重定向方式，要求客户端使用GET请求新的URL。这两种状态码通常用于临时重定向。  
**307 (Temporary Redirect)**: 表示所请求的资源临时移动到新的URL，但是客户端应该保持原始请求的HTTP方法，即如果是POST请求，仍然要用POST请求新的URL。此状态码类似于302。  
**308 (Permanent Redirect)**: 表示所请求资源永久移动到新的URL，但是客户端应该抱池原始请求的HTTP方法。  
如果你需要关闭重定向，可以通过setInstanceFollowRedirects(false)。  

* **获取HTTP输入的时候，使用HttpURLConnection和URLConnection打开的连接有什么不同？**  
没有什么不同。当连接HTTP协议的URL时，虽然`URLConnection`和`HttpURLConnection`是不同的类，但是在底层机制上，当获取一个HTTP连接时，`URLConnection`会根据URL的协议选择适当的具体实现，所以对于HTTP协议来说，底层会使用`HttpURLConnection`这个酒体的实现。这种机制确保了在HTTP操作时能够使用专门为HTTP请求和响应设计的功能。  

## 程序启动和类加载
* **Spring程序中都有哪些特有的方式，能够让函数方法在项目启动时运行？**  
注解：
@Scheduled：设置项目启动的第n秒执行函数。
@PostConstruct
@PreDestory
@EventListener
@SpringAOP
自定义注解：
通过创建自定义注解并编写相应的处理器从而根据注解去触发函数执行。

* **传统Java项目中如何在项目启动加载时进行函数的执行？**
一是在类加载中定义，例如静态代码块；二是在主类中定义；三是使用其他组件封装需要执行的代码。

* **传统Java项目中，是否明确具有项目加载前、项目加载中、项目加载后的过程？**
在传统的纯Java项目中，整个项目启动过程通常就是项目加载过程的一部分，没有显式的分隔。
因为在纯Java项目中，如果没有像Spring等框架提供的内置机制来单独实现项目加载前和项目加载时分别运行的方法，则需要手动地管理这些阶段的执行。
这意味着在纯Java项目中没有现成的机制来管理项目的加载阶段，需要通过代码的逻辑和调用关系来判断方法是在哪个阶段运行。
所以，正因为在纯Java项目中没有固定的规范或框架来定义和管理这些阶段和执行，则需要我们根据项目的结构和逻辑来划分这些阶段，比如通过自定义方法和类来实现类似的效果，从而确保方法的调用顺序符合预期。
### 传统Java项目加载全过程
**项目加载前过程：**
项目加载前过程会包含一些初始化的操作，如配置加载、依赖项的初始化等；
**项目加载时过程：**
项目加载时过程涉及一些启动的准备工作，如连接数据库、加载资源等；
**项目加载后过程：**
项目加载后过程则是项目启动后需要执行等业务逻辑。
### 如何判断项目加载阶段
要判断方法是在哪个阶段运行，可以根据方法的调用顺序、代码逻辑以及方法所在的位置进行分析，例如在方法中添加一些日志输出或打印语句，能够帮助你更好地了解方法的运行时机。
### 如何精细控制项目加载阶段
如果需要精细控制项目的加载阶段和执行顺序，可以手动创建一个类似于**声明周期管理的机制**，定义一些特定方法，并在适当地方调用这些方法，以达到想要的加载顺序和执行效果。
如果需要更细粒度的控制项目的加载阶段，可能就需要考虑使用类似Spring的框架了，它们提供了更多生命周期函数和扩展机制，能够方便地管理项目的不同阶段。

* **请讲一讲需要在项目启动时运行某些逻辑使用@Bean或@EventListener的异同。**  
在项目启动时实现运行逻辑使用@Bean和@EventListener是不同的，准确地说可以分为项目启动前、项目启动时和项目启动后。